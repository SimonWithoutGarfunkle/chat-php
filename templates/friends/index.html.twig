{% extends 'base.html.twig' %}

{% block title %}Mes amis{% endblock %}

{% block body %}
    <div class="stack">
        <div class="card">
            <h1>Mes amis</h1>
            {% if friends|length == 0 %}
                <p class="muted">Aucun ami pour le moment.</p>
            {% else %}
                <ul class="list">
                    {% for friend in friends %}
                        <li class="list-item">
                            <span>{{ friend.email }}</span>
                            <a class="btn btn-secondary" href="{{ path('app_chat_conversation', {friendId: friend.id}) }}">Chat</a>
                            <form method="post" action="{{ path('app_friends_remove', {id: friend.id}) }}">
                                <input type="hidden" name="_token" value="{{ csrf_token('remove_friend_' ~ friend.id) }}">
                                <button class="btn btn-ghost" type="submit">Retirer</button>
                            </form>
                        </li>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>

        <div class="card">
            <h2>Ajouter un ami</h2>
            {% if candidates|length == 0 %}
                <p class="muted">Aucun utilisateur Ã  ajouter.</p>
            {% else %}
                <ul class="list">
                    {% for u in candidates %}
                        <li class="list-item">
                            <span>{{ u.email }}</span>
                            <form method="post" action="{{ path('app_friends_add', {id: u.id}) }}">
                                <input type="hidden" name="_token" value="{{ csrf_token('add_friend_' ~ u.id) }}">
                                <button class="btn btn-primary" type="submit">Ajouter</button>
                            </form>
                        </li>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>
    </div>
{% endblock %}
