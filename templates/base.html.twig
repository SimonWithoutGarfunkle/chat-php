<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Chat POC{% endblock %}</title>
    <style>
        /* Base layout */
        :root {
            --bg: #0b1020;
            --panel: #121934;
            --panel-2: #0f1530;
            --text: #eef2ff;
            --muted: #aab1c7;
            --primary: #6366f1;
            --primary-2: #7c3aed;
            --success-bg: #063b2e;
            --success-border: #0a5b43;
            --error-bg: #3b0611;
            --error-border: #5b0a1c;
        }
        html, body { height: 100%; }
        body {
            font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
            margin: 0;
            color: var(--text);
            background: radial-gradient(1000px 600px at 10% -10%, #1b2355 0%, transparent 60%),
                        radial-gradient(1000px 600px at 100% 0%, #1b2a6b 0%, transparent 50%),
                        var(--bg);
        }
        .container { max-width: 880px; margin: 0 auto; padding: 2rem; }

        /* Top nav */
        .topbar {
            position: sticky; top: 0; z-index: 5;
            background: rgba(10, 14, 35, .7);
            backdrop-filter: blur(8px);
            border-bottom: 1px solid rgba(255,255,255,.06);
        }
        nav { display: flex; align-items: center; justify-content: space-between; gap: 1rem; padding: .75rem 2rem; }
        .brand { font-weight: 700; letter-spacing: .2px; color: var(--text); text-decoration: none; }
        .nav-links { display: flex; gap: .75rem; align-items: center; }
        nav a { color: var(--text); text-decoration: none; opacity: .9; padding: .4rem .65rem; border-radius: 6px; }
        nav a:hover { background: rgba(255,255,255,.06); opacity: 1; }

        /* Utilities */
        .muted { color: var(--muted); }
        .stack { display: grid; gap: 1rem; }

        /* Cards */
        .card {
            background: linear-gradient(180deg, var(--panel) 0%, var(--panel-2) 100%);
            border: 1px solid rgba(255,255,255,.06);
            border-radius: 12px;
            padding: 1.25rem;
            box-shadow: 0 10px 30px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.04);
        }
        .card h1, .card h2, .card h3 { margin: 0 0 .5rem 0; }

        /* Lists */
        .list { list-style: none; padding: 0; margin: 0; display: grid; gap: .5rem; }
        .list-item { display: flex; align-items: center; justify-content: space-between; gap: .75rem; padding: .6rem .75rem; border-radius: 10px; border: 1px solid rgba(255,255,255,.08); background: rgba(255,255,255,.03); }

        /* Buttons & links */
        .btn { display: inline-flex; align-items: center; justify-content: center; gap: .5rem; padding: .65rem .9rem; border-radius: 8px; border: 1px solid transparent; text-decoration: none; color: var(--text); cursor: pointer; }
        .btn-primary { background: linear-gradient(135deg, var(--primary), var(--primary-2)); box-shadow: 0 8px 20px rgba(99,102,241,.35); }
        .btn-primary:hover { filter: brightness(1.05); }
        .btn-ghost { background: transparent; border-color: rgba(255,255,255,.12); }
        .btn-ghost:hover { background: rgba(255,255,255,.06); }

        /* Flash messages */
        .flash { padding: .6rem .9rem; border-radius: 10px; margin: 1rem 0; border: 1px solid transparent; }
        .flash-success { background: var(--success-bg); border-color: var(--success-border); }
        .flash-error { background: var(--error-bg); border-color: var(--error-border); }

        /* Forms */
        form .field { margin-bottom: .9rem; }
        form label { display: block; margin-bottom: .4rem; color: var(--muted); font-size: .95rem; }
        form input[type="text"],
        form input[type="email"],
        form input[type="password"],
        form input[type="search"] {
            width: 100%;
            padding: .65rem .75rem;
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,.16);
            background: rgba(255,255,255,.04);
            color: var(--text);
            outline: none;
        }
        form input:focus { border-color: rgba(99,102,241,.7); box-shadow: 0 0 0 3px rgba(99,102,241,.25); }
        form button { width: 100%; }
    </style>
    {% block stylesheets %}{% endblock %}
    {% block javascripts %}{% endblock %}
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text><text y=%221.3em%22 x=%220.2em%22 font-size=%2276%22 fill=%22%23fff%22>sf</text></svg>">
</head>
<body>
<div class="topbar">
    <nav>
        <a class="brand" href="{{ path('app_home') }}">Chat POC</a>
        <div class="nav-links">
            {% if app.user %}
                <a href="{{ path('app_friends_index') }}">Amis</a>
                <a href="{{ path('app_logout') }}">Se déconnecter</a>
            {% else %}
                <a href="{{ path('app_login') }}">Se connecter</a>
                <a href="{{ path('app_register') }}">S'inscrire</a>
            {% endif %}
        </div>
    </nav>
</div>

<div class="container">

    {% for label, messages in app.flashes %}
        {% for message in messages %}
            <div class="flash flash-{{ label == 'error' ? 'error' : (label == 'success' ? 'success' : label) }}">{{ message }}</div>
        {% endfor %}
    {% endfor %}

    {% block body %}{% endblock %}
</div>
</body>
</html>
